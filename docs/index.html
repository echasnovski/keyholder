<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Store Data About Rows • keyholder</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/united/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><link href="extra.css" rel="stylesheet">
<script src="extra.js"></script><meta property="og:title" content="Store Data About Rows">
<meta property="og:description" content='Tools for keeping track of information, named
    "keys", about rows of data frame like objects. This is done by
    creating special attribute "keys" which is updated after every change
    in rows (subsetting, ordering, etc.).  This package is designed to
    work tightly with dplyr package.'>
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">keyholder</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/introduction.html">Introduction to keyholder</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/echasnovski/keyholder/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">


<div id="keyholder" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#keyholder" class="anchor"></a>keyholder</h1></div>
<p><code>keyholder</code> is a package for storing information (<em>keys</em>) about rows of data frame like objects. The common use cases are to track rows of data without modifying it and to backup and restore information about rows. This is done with creating a class <strong>keyed_df</strong> which has special attribute “keys”. Keys are updated according to changes in rows of reference data frame.</p>
<p><code>keyholder</code> is designed to work tightly with <a href="http://dplyr.tidyverse.org/">dplyr</a> package. All its one- and two-table verbs update keys properly.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install current stable version from CRAN with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><code class = "r"><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span>(<span class="st">"keyholder"</span>)</code></pre></div>
<p>Also you can install development version from github with:</p>
<div class="sourceCode" id="cb2"><pre class="r"><code class = "r"><span class="co"># install.packages("devtools")</span>
<span class="kw pkg">devtools</span><span class="kw ns">::</span><span class="fu"><a href="https://devtools.r-lib.org//reference/remote-reexports.html">install_github</a></span>(<span class="st">"echasnovski/keyholder"</span>)</code></pre></div>
</div>
<div id="usage" class="section level2">
<h2 class="hasAnchor">
<a href="#usage" class="anchor"></a>Usage</h2>
<p><code>keyholder</code> provides a set of functions to work with keys:</p>
<ul>
<li>Set keys with <code><a href="reference/keys-set.html">assign_keys()</a></code> and <code><a href="reference/keys-set.html">key_by()</a></code>.</li>
<li>Get all keys with <code><a href="reference/keys-get.html">keys()</a></code>. Get one specific key with <code><a href="reference/keys-manipulate.html">pull_key()</a></code>.</li>
<li>Restore information stored in certain keys with <code><a href="reference/keys-manipulate.html">restore_keys()</a></code> and its scoped variants (<code>*_all()</code>, <code>*_if()</code> and <code>*_at()</code>).</li>
<li>Rename certain keys with <code><a href="reference/keys-manipulate.html">rename_keys()</a></code> and its scoped variants.</li>
<li>Remove certain keys with <code><a href="reference/keys-manipulate.html">remove_keys()</a></code> and its scoped variants. Completely unkey object with <code><a href="reference/keys-set.html">unkey()</a></code>.</li>
<li>Track rows with <code><a href="reference/keyholder-id.html">use_id()</a></code> and special <code>.id</code> key.</li>
</ul>
<p>For more detailed explanations and examples see package vignettes and documentation.</p>
<div id="common-use-cases" class="section level3">
<h3 class="hasAnchor">
<a href="#common-use-cases" class="anchor"></a>Common use cases</h3>
<div class="sourceCode" id="cb3"><pre class="r"><code class = "r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">dplyr</span>)
<span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">keyholder</span>)
<span class="no">mtcars_tbl</span> <span class="kw">&lt;-</span> <span class="no">mtcars</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/reexports.html">as_tibble</a></span>()</code></pre></div>
<ul>
<li>Track rows without modifying data:</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb4"><pre class="r"><code class = "r"><span class="no">mtcars_tbl_id</span> <span class="kw">&lt;-</span> <span class="no">mtcars_tbl</span> <span class="kw">%&gt;%</span>
  <span class="co"># Creates a key '.id' with row index</span>
  <span class="fu"><a href="reference/keyholder-id.html">use_id</a></span>() <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span>(<span class="no">vs</span> <span class="kw">==</span> <span class="fl">1</span>, <span class="no">gear</span> <span class="kw">==</span> <span class="fl">4</span>)

<span class="no">mtcars_tbl_id</span>
<span class="co">#&gt; # A keyed object. Keys: .id </span>
<span class="co">#&gt; # A tibble: 10 x 11</span>
<span class="co">#&gt;     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1  22.8     4  108     93  3.85  2.32  18.6     1     1     4     1</span>
<span class="co">#&gt; 2  24.4     4  147.    62  3.69  3.19  20       1     0     4     2</span>
<span class="co">#&gt; 3  22.8     4  141.    95  3.92  3.15  22.9     1     0     4     2</span>
<span class="co">#&gt; # … with 7 more rows</span>

<span class="no">mtcars_tbl_id</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="reference/keys-manipulate.html">pull_key</a></span>(<span class="no">.id</span>)
<span class="co">#&gt;  [1]  3  8  9 10 11 18 19 20 26 32</span></code></pre></div>
<ul>
<li>Backup and restore information:</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb5"><pre class="r"><code class = "r"><span class="no">mtcars_tbl_keyed</span> <span class="kw">&lt;-</span> <span class="no">mtcars_tbl</span> <span class="kw">%&gt;%</span>
  <span class="co"># Backup</span>
  <span class="fu"><a href="reference/keys-set.html">key_by</a></span>(<span class="no">vs</span>, <span class="no">am</span>, <span class="no">gear</span>) <span class="kw">%&gt;%</span>
  <span class="co"># Modify</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">vs</span> <span class="kw">=</span> <span class="no">am</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">vs</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="kw">gear</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html">max</a></span>(<span class="no">gear</span>))

<span class="co"># Restore with recomputing groups</span>
<span class="no">mtcars_tbl_restored</span> <span class="kw">&lt;-</span> <span class="no">mtcars_tbl_keyed</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="reference/restore-keys-scoped.html">restore_keys_all</a></span>()
<span class="no">mtcars_tbl_grouped</span> <span class="kw">&lt;-</span> <span class="no">mtcars_tbl</span> <span class="kw">%&gt;%</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html">group_by</a></span>(<span class="no">vs</span>)
<span class="fu"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span>(
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="no">mtcars_tbl_restored</span>),
  <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span>(<span class="no">mtcars_tbl_grouped</span>)
)
<span class="co">#&gt; [1] TRUE</span>
<span class="fu"><a href="https://rdrr.io/r/base/all.equal.html">all.equal</a></span>(
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_data.html">group_indices</a></span>(<span class="no">mtcars_tbl_restored</span>),
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_data.html">group_indices</a></span>(<span class="no">mtcars_tbl_grouped</span>)
)
<span class="co">#&gt; [1] TRUE</span>

<span class="co"># Restore with renaming</span>
<span class="no">mtcars_tbl_keyed</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/restore-keys-scoped.html">restore_keys_at</a></span>(<span class="st">"vs"</span>, <span class="kw">.funs</span> <span class="kw">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span>(~ <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span>(<span class="no">.</span>, <span class="st">"_old"</span>)))
<span class="co">#&gt; # A keyed object. Keys: vs, am, gear </span>
<span class="co">#&gt; # A tibble: 32 x 12</span>
<span class="co">#&gt; # Groups:   vs [2]</span>
<span class="co">#&gt;     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb vs_old</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span>
<span class="co">#&gt; 1  21       6   160   110  3.9   2.62  16.5     1     1     5     4      0</span>
<span class="co">#&gt; 2  21       6   160   110  3.9   2.88  17.0     1     1     5     4      0</span>
<span class="co">#&gt; 3  22.8     4   108    93  3.85  2.32  18.6     1     1     5     1      1</span>
<span class="co">#&gt; # … with 29 more rows</span></code></pre></div>
<ul>
<li>As a special case of previous usage one can also hide columns for convenient use of <code>dplyr</code>’s *_if scoped variants of verbs:</li>
</ul>
<!-- end list --><div class="sourceCode" id="cb6"><pre class="r"><code class = "r"><span class="co"># Restored key goes to the end of the tibble</span>
<span class="no">mtcars_tbl</span> <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/keys-set.html">key_by</a></span>(<span class="no">mpg</span>, <span class="kw">.exclude</span> <span class="kw">=</span> <span class="fl">TRUE</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate_all.html">mutate_if</a></span>(<span class="no">is.numeric</span>, <span class="no">round</span>, <span class="kw">digits</span> <span class="kw">=</span> <span class="fl">0</span>) <span class="kw">%&gt;%</span>
  <span class="fu"><a href="reference/restore-keys-scoped.html">restore_keys_all</a></span>()
<span class="co">#&gt; # A keyed object. Keys: mpg </span>
<span class="co">#&gt; # A tibble: 32 x 11</span>
<span class="co">#&gt;     cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb   mpg</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt; 1     6   160   110     4     3    16     0     1     4     4  21  </span>
<span class="co">#&gt; 2     6   160   110     4     3    17     0     1     4     4  21  </span>
<span class="co">#&gt; 3     4   108    93     4     2    19     1     1     4     1  22.8</span>
<span class="co">#&gt; # … with 29 more rows</span></code></pre></div>
</div>
</div>
</div>

  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Download from CRAN at <br><a href="https://cloud.r-project.org/package=keyholder">https://​cloud.r-project.org/​package=keyholder</a>
</li>
<li>Browse source code at <br><a href="https://github.com/echasnovski/keyholder/">https://​github.com/​echasnovski/​keyholder/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/echasnovski/keyholder/issues/">https://​github.com/​echasnovski/​keyholder/​issues/​</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Evgeni Chasnovski <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://travis-ci.org/echasnovski/keyholder"><img src="https://travis-ci.org/echasnovski/keyholder.svg?branch=master" alt="Travis-CI Build Status"></a></li>
<li><a href="https://codecov.io/github/echasnovski/keyholder?branch=master"><img src="https://codecov.io/gh/echasnovski/keyholder/graph/badge.svg" alt="Coverage Status"></a></li>
<li><a href="https://cran.r-project.org/package=keyholder"><img src="https://www.r-pkg.org/badges/version/keyholder?color=blue" alt="CRAN"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Evgeni Chasnovski.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
